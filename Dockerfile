# ==================================================================================================
# Build
# ==================================================================================================

FROM erlang:28.0.2.0-slim AS builder

WORKDIR /app
COPY . .
RUN rebar3 compile && rebar3 as prod release

# ==================================================================================================
# app
# ==================================================================================================

FROM erlang:28.0.2.0-slim

WORKDIR /app
COPY --from=builder /app/_build/prod/rel/tasks_service /app

EXPOSE 8080

ENTRYPOINT ["/app/bin/tasks_service", "foreground"]

